(()=>{"use strict";function n(n){let e=new Date(1e3*n),t=e.getHours(),o=e.getMinutes();return o<10&&t<10?`0${t}:0${o}`:o<10?`${t}:0${o}`:t<10?`0${t}:${o}`:`${t}:${o}`}function e(n){return n.split(" ").map((n=>n.charAt(0).toUpperCase()+n.slice(1))).join(" ")}function t(n){const e=document.querySelector(n);if(null===e)throw new Error(`div ${n} was not found on your page`);return e}function o(n,e){const t=document.createElement("div");return t.id=n,t.className=e,t}function i(n){const e=o("location");return e.innerHTML=n,console.log("location div: ",e),e}function r(n,e){const t=o(n);return t.innerHTML=function(n){let e=new Date(1e3*n);return`${e.getDate()}.${e.getMonth()+1}.${e.getFullYear()}`}(e),console.log("date div:",t),t}function c(e,t){const i=o(e);return i.innerHTML=`updated ${n(t)}`,console.log("time div:",i),i}function s(n,e){const t=o(null,"icon"),i=document.createElement("img");return i.id=n,i.src=`http://openweathermap.org/img/wn/${e}@2x.png`,i.alt="weather icon",t.append(i),t}function a(n,t){const i=o(n);return i.innerHTML=e(t),console.log("desc div:",i),i}function u(e,t){const i=o(e);return i.innerHTML=`Sunrise ${n(t)}`,console.log("sunrise div:",i),i}function d(e,t){const i=o(e);return i.innerHTML=`Sunset ${n(t)}`,console.log("sunset div:",i),i}function l(n,e,t){const i=o(n);return i.innerHTML=`${Math.round(e)}°/${Math.round(t)}°`,console.log("temp div:",i),i}function p(n,e){const t=o(n);return t.innerHTML=`Dew point ${Math.round(e).toFixed(1)}°`,console.log("dew point div: ",t),t}function f(n,e){const t=o(n);return t.innerHTML=`Pressure ${e}hpa`,console.log("pressure div: ",t),t}function m(n,e){const t=o(n);return t.innerHTML=`Humidity ${e}%`,console.log("humidity div: ",t),t}function h(n,e){const t=o(n);return t.innerHTML=`Visibility ${Math.round(e/1e3)}km`,console.log("visibility div: ",t),t}function v(n,e){const t=o(n);return t.innerHTML=`Wind speed ${e}m/s`,console.log("wind div: ",t),t}function g(n,e){const t=o(n);var i;return t.innerHTML=`Uv ${i=Math.round(e),i<3?"low":i<6?"moderate":i<8?"high":i<11?"very high":i>10?"extreme":void 0}`,console.log("uv div: ",t),t}const w=t(".date-time-place"),y=t(".weather-info"),$=t(".detailed-info"),M=t(".daily-forcast"),L=function(n,e){const t=o(`day${n}`,"daily");e.forEach((n=>{t.append(n)})),M.append(t)},H=async function(){const n=function(){const n=document.getElementById("city-input").value;if(""===n)throw new Error('empty form_input \n form_input-id: "city-input" \n form-class: "form" \n function: getCity() in domUtils.js');return e(n)}(),{alert:t,current:M,daily:H}=await async function(n){const e=await async function(n){const e=await fetch(function(n){return`http://api.openweathermap.org/geo/1.0/direct?q=${n}&limit=1&appid=fd57668c10f7ada1c6e9a2cbc53e10e1`}(n),{mode:"cors"}),t=await e.json();return{lat:t[0].lat,lon:t[0].lon}}(n),t=await fetch((o=e.lat,i=e.lon,`https://api.openweathermap.org/data/2.5/onecall?lat=${o}&lon=${i}&units=metric&exclude=hourly,minutely&appid=fd57668c10f7ada1c6e9a2cbc53e10e1`),{mode:"cors"});var o,i;return await t.json()}(n);console.log(H[0].weather[0].description),console.log(M),console.log(H),console.log(t);const T=[i(n),r("date",M.dt),c("time",M.dt)];T.forEach((n=>{w.append(n)})),w.append(function(){const n=document.createElement("button");return n.classList="btn",n.innerHTML='<i class="fa fa-rotate-right"></i>',n}()),function(n,e,t,i){y.append(n);const r=o(null,"main-temp"),c=o(null,"temperature");c.append(e),c.append(t),r.append(c),r.append(i),y.append(r)}(a("desc",M.weather[0].description),function(n,e){const t=o(n);return t.innerHTML=`${Math.round(e)}°`,console.log("temp div:",t),t}("temp",M.temp),function(n,e){const t=o(n);return t.innerHTML=`Feels like ${Math.round(e)}°`,console.log("feels div:",t),t}("feels",M.feels_like),s("icon",M.weather[0].icon));!function(n){n.forEach((n=>{$.append(n)}))}([m("humidity",M.humidity),v("wind",M.wind_speed),h("visibility",M.visibility),f("pressure",M.pressure),g("uv",M.uvi),u("sunrise",M.sunrise),d("sunset",M.sunset),d("dew",M.dew_point)]);for(let n=0;n<8;n++){let e=[a("desc",H[n].weather[0].description),l("temp",H[n].temp.min,H[n].temp.max),s("icon",H[n].weather[0].icon),r("date",H[n].dt),m("humidity",H[n].humidity),v("wind",H[n].wind_speed),f("pressure",H[n].pressure),g("uv",H[n].uvi),u("sunrise",H[n].sunrise),d("sunset",H[n].sunset),p("dew",H[n].dew_point)];L(n,e)}return!0},T=document.getElementById("loader");document.querySelector("form").addEventListener("submit",(n=>{var e;n.preventDefault(),(e=T).classList.remove("deactivate"),e.classList.add("activate"),async function(n){var e;await n&&((e=T).classList.remove("activate"),e.classList.add("fadeoutbcg"),setTimeout((()=>{e.classList.add("deactivate")}),1e3))}(H())}))})();